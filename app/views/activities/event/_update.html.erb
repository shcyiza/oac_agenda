  <% tracked_event = @events.find(activity.trackable_id) %>
<% if @events.exists?(id: activity.trackable_id) && @events.still_relevent.include?(activity.trackable) && activity.user_id != current_user.id && activity.id == @activities.where(:created_at => (activity.created_at.beginning_of_day..activity.created_at.end_of_day), :trackable_id => @events.find(activity.trackable_id).id).first.id %>

  <div class="alert-box lists row">
    <hr>
    <%= render partial: "activities/event/update_message", locals: {activity: activity, tracked_event: tracked_event}%>

    <% if event_on_event_day(current_user.events, activity.trackable) > 0  %>
      <div class="small-5 columns left">
        <br>
        <% current_user.events.each do |event| %>
          <% activity.trackable.days.each do |date| %>
            <%= render partial: 'activities/followable_partials/event_that_day', locals: {date: date, event: event, activity: activity} %>
          <% end %>
        <% end %>
      </div>

    <% elsif current_user.folevents.where("created_at <= ?", activity.trackable.created_at ).where(event_id: activity.trackable.id).count > 0 %>
    <%= render partial: "activities/event/partials/cause_organisation_followed", locals: {activity: activity}%>


    <% elsif current_user.folorgs.where("created_at <= ?", activity.trackable.created_at ).where(orgn_id: activity.trackable.orgn_id).count > 0 %>
              <%= render partial: "activities/event/partials/cause_organisation_followed", locals: {activity: activity}%>


    <% elsif likes_that_day(activity.trackable) > 0 && activity.user_id != current_user.id %>
          <%= render partial: "activities/event/partials/cause_date_followed", locals: {activity: activity}%>

    <% end %>
  </div>
<% end %>
