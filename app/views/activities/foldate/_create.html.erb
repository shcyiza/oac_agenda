<% if @foldates.exists?(id: activity.trackable_id) %>
<!-- looped scope for when you made an event on the same date as activity -->
<% events_that_day = 0 %>
<% current_user.events.each do |event| %>
  <% if event.days.include?(activity.trackable.datefolwd) == true && event.created_at <= activity.trackable.created_at %>
    <% events_that_day  += 1 %>
  <% end %>
<% end %>
<!-- looped scope for when event date range include the same date as your followed dates -->
<% date_followed = 0 %>
<% current_user.foldates.where("created_at <= ?" , activity.trackable.created_at ).each do |date_to_track| %>
  <% if date_to_track.datefolwd == activity.trackable.datefolwd && date_to_track.created_at <= activity.trackable.created_at %>
    <% date_followed  += 1 %>
  <% end %>
<% end %>

<% if date_followed > 0 && activity.trackable.user_id != current_user.id %>
  <div class="alert-box lists row">
  <hr>
    <%= render partial: 'activities/foldate/partials/heart' %>
    <div class="large-6 columns left">
      <%= render partial: 'activities/foldate/partials/create_message', locals: {activity: activity} %> comme vous.
    </div>
    <%= render partial: 'activities/foldate/partials/cause_date_followed', locals: {activity: activity} %>
  </div>
  <% elsif events_that_day > 0 && activity.trackable.user_id != current_user.id %>
    <div class="alert-box lists row">
      <hr>
      <%= render partial: 'activities/foldate/partials/_heart' %>
      <div class="large-6 columns left">
        <%= render partial: 'activities/foldate/partials/create_message', locals: {activity: activity} %>.
      </div>
      <div class="small-5 columns left">
        <br>
        <% current_user.events.each do |event| %>
          <%= render partial: 'activities/followable_partials/event_that_day', locals: {date: activity.trackable.datefolwd, event: event, activity: activity} %>
        <% end %>
      </div>
    </div>
<% end %>
<% end %>
